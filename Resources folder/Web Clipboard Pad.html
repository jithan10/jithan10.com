<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Web Clipboard Pad</title>
  <style>
    :root{
      --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#94a3b8; --accent:#38bdf8;
      --btn:#1f2937; --btnHover:#374151; --danger:#ef4444; --ring:0 0 0 .2rem rgba(56,189,248,.35)
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b1024,#0f172a);color:var(--ink);font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    header{padding:24px 16px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .title{font-weight:700;font-size:18px;letter-spacing:.2px}
    .bar{display:flex;gap:8px;flex-wrap:wrap}
    main{max-width:980px;margin:0 auto;padding:0 16px 24px}
    .card{background:var(--panel);border:1px solid rgba(148,163,184,.15);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .pad{width:100%;min-height:56vh;max-height:72vh;resize:vertical;background:#0b1220;color:var(--ink);border:none;padding:16px 16px 20px;border-radius:12px;outline:none;font:15px/1.55 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
    .pad:focus{box-shadow:var(--ring)}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .actions{padding:14px}
    button, .btn{appearance:none;border:1px solid rgba(148,163,184,.25);background:var(--btn);color:var(--ink);padding:9px 12px;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;gap:8px;align-items:center}
    button:hover{background:var(--btnHover)}
    button:focus-visible{outline:none;box-shadow:var(--ring)}
    .ghost{background:transparent}
    .danger{border-color:rgba(239,68,68,.4);color:#fecaca}
    .accent{border-color:rgba(56,189,248,.5);}
    .hint{color:var(--muted);font-size:13px}
    .section{padding:16px}
    dialog{border:none;border-radius:16px;padding:0;max-width:480px;width:clamp(280px,92vw,480px);background:#0b1220;color:var(--ink)}
    dialog::backdrop{background:rgba(0,0,0,.6)}
    .modal-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid rgba(148,163,184,.15)}
    .modal-body{padding:16px}
    .linkbox{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(148,163,184,.25);background:#030712;color:var(--ink);font:14px ui-monospace,monospace}
    .qr{display:flex;justify-content:center;padding:8px}
    .footer{padding:10px 16px;border-top:1px solid rgba(148,163,184,.15);display:flex;gap:8px;justify-content:flex-end}
    .nowrap{white-space:nowrap}
  </style>
</head>
<body>
  <header>
    <div class="title">üóíÔ∏è Web Clipboard Pad</div>
    <div class="bar">
      <button id="newBtn" title="Start fresh">New</button>
      <button id="clearBtn" class="danger" title="Clear the pad">Clear</button>
      <button id="copyBtn" title="Copy all">Copy</button>
      <button id="pasteBtn" title="Paste from clipboard">Paste</button>
      <button id="saveBtn" class="accent" title="Create a share link">Create Link</button>
      <button id="qrBtn" title="Show QR for the link">QR</button>
      <button id="downloadBtn" title="Download as .txt">Download</button>
      <label class="btn ghost" title="Upload a .txt to load here">
        Upload<input id="upload" type="file" accept="text/plain" hidden>
      </label>
    </div>
  </header>

  <main>
    <div class="card section">
      <textarea id="pad" class="pad" placeholder="Type, paste, or drop text here..."></textarea>
      <div class="actions row">
        <span class="hint">Autosaves on this device ‚Ä¢ Share via link/QR (stored in the URL hash, not on a server).</span>
        <span class="hint" id="sizeInfo"></span>
      </div>
    </div>
    <div class="section hint">Tip: Open this page on any device. Type or paste text, click <span class="nowrap">Create Link</span>, then open that link (or scan the QR) on the other device. No login. No server.</div>
  </main>

  <dialog id="linkDlg">
    <div class="modal-head">
      <strong>Share Link</strong>
      <button id="closeLink" class="ghost">‚úï</button>
    </div>
    <div class="modal-body">
      <input id="linkOut" class="linkbox" readonly>
      <div class="qr"><div id="qrcode"></div></div>
      <div class="hint">The text is compressed into the URL fragment (#). Nothing is uploaded.</div>
    </div>
    <div class="footer">
      <button id="copyLink">Copy Link</button>
      <button id="openLink">Open</button>
    </div>
  </dialog>

  <script>
// --- LZ-String (min) https://github.com/pieroxy/lz-string (MIT)
//! LZ-String 1.4.4, MIT License
var LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/\s/g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i={},p={},s="",u="",c="",a=2,f=3,l=2,h=",",d=0,v=0;for(i[0]=0,i[1]=1,i[2]=2,t=0;t<o.length;t+=1)if(s=o.charAt(t),Object.prototype.hasOwnProperty.call(i,s)||(i[s]=f++,p[s]=!0),u=c+s,Object.prototype.hasOwnProperty.call(i,u))c=u;else{if(Object.prototype.hasOwnProperty.call(p,c)){if(c.charCodeAt(0)<256){for(e=0;e<l;e++)d<<=1,v==r-1?(v=0,h+=n(d),d=0):v++;for(e=c.charCodeAt(0),e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=0;e<8;e++)d=d<<1,v==r-1?(v=0,h+=n(d),d=0):v++}else{for(e=1;e<l;e++)d=d<<1|1,v==r-1?(v=0,h+=n(d),d=0):v++;for(e=c.charCodeAt(0),e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=0;e<16;e++)d=d<<1,v==r-1?(v=0,h+=n(d),d=0):v++}l--,delete p[c]}else for(e=i[c],e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=1;e<f;e+=1)0==(e& e-1)&&(l++);i[u]=f++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(p,c)){if(c.charCodeAt(0)<256){for(e=0;e<l;e++)d<<=1,v==r-1?(v=0,h+=n(d),d=0):v++;for(e=c.charCodeAt(0),e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=0;e<8;e++)d=d<<1,v==r-1?(v=0,h+=n(d),d=0):v++}else{for(e=1;e<l;e++)d=d<<1|1,v==r-1?(v=0,h+=n(d),d=0):v++;for(e=c.charCodeAt(0),e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=0;e<16;e++)d=d<<1,v==r-1?(v=0,h+=n(d),d=0):v++}l--,delete p[c]}else for(e=i[c],e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(e=1;e<f;e+=1)0==(e& e-1)&&(l++)}for(e=i[2],e>>=0;e>0;)d=d<<1|1&e,v==r-1?(v=0,h+=n(d),d=0):v++,e>>=1;for(;;){if(d<<=1,v==r-1){h+=n(d);break}v++}return h},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,p,s,u,c,a,f,l=[],h=4,d=4,v=3,g="",m=[],w={val:e(0),position:n,index:1};for(i=0;i<3;i+=1)l[i]=i;for(p=0,c=Math.pow(2,2),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;switch(t=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;f=r(p);break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;f=r(p);break;case 2:return""}for(l[3]=f,s=f,m.push(f);;){if(w.index>o)return"";for(p=0,c=Math.pow(2,v),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;switch(f=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;l[d++]=r(p),f=d-1,v--;break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),p|=(u>0?1:0)*a,a<<=1;l[d++]=r(p),f=d-1,v--;break;case 2:return m.join("");default:if(f<l.length)g=l[f];else{if(f!==d)return null;g=s+s.charAt(0)}m.push(g),l[d++]=s+g.charAt(0),s=g,0==--h&&(h=Math.pow(2,v),v++)}}
};return i}();
// --- end LZ-String

const $ = (sel)=>document.querySelector(sel);
const pad = $('#pad');
const linkDlg = $('#linkDlg');
const linkOut = $('#linkOut');
const sizeInfo = $('#sizeInfo');
let currentLink = '';

function updateSize(){
  const bytes = new Blob([pad.value]).size;
  const kb = (bytes/1024).toFixed(1);
  sizeInfo.textContent = `‚Ä¢ ${kb} KB`;
}

function saveLocal(){
  localStorage.setItem('webpad-content', pad.value);
  updateSize();
}

function loadLocal(){
  const v = localStorage.getItem('webpad-content');
  if(v && !location.hash) pad.value = v;
  updateSize();
}

function fromHash(){
  if(location.hash.startsWith('#data=')){
    const raw = decodeURIComponent(location.hash.slice(6));
    try{ pad.value = LZString.decompressFromEncodedURIComponent(raw) || ''; }
    catch{ pad.value = ''; }
    updateSize();
  }
}

function makeLink(){
  const compressed = LZString.compressToEncodedURIComponent(pad.value);
  const url = `${location.origin}${location.pathname}#data=${compressed}`;
  currentLink = url;
  linkOut.value = url;
  // QR
  const box = document.getElementById('qrcode');
  box.innerHTML = '';
  makeQR(url, box);
  linkDlg.showModal();
}

function copyText(el){
  el.select(); el.setSelectionRange(0, 99999);
  document.execCommand('copy');
}

function downloadTxt(){
  const blob = new Blob([pad.value], {type:'text/plain'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `web-pad-${new Date().toISOString().slice(0,10)}.txt`;
  document.body.appendChild(a); a.click(); a.remove();
}

function readFile(file){
  const r = new FileReader();
  r.onload = ()=>{ pad.value = r.result; saveLocal(); };
  r.readAsText(file);
}

// Minimal QR generator (qrcode-generator, small build)
// Source: https://github.com/kazuhikoarase/qrcode-generator (MIT) ‚Äì trimmed minimal version for type auto + L level
!function(){function t(t){this.mode=f,this.data=t}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r];for(var n=0;n<e;n++)this.num[n]=0}function n(t,e){this.num=new Array(t);for(var r=0;r<t;r++)this.num[r]=0;void 0!=e&&("number"==typeof e?this.fromNumber(e):this.fromString(e))}var o={L:1,M:0,Q:3,H:2},i=4,f=4; t.prototype.getLength=function(){return this.data.length},t.prototype.write=function(t){for(var e=0;e<this.data.length;e++){var r=this.data.charCodeAt(e);r>255&&t.put(0,8),t.put(r,8)}};var a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;a.getBCHDigit(e)-a.getBCHDigit(a.G15)>=0;)e^=a.G15<<a.getBCHDigit(e)-a.getBCHDigit(a.G15);return(t<<10|e)^a.G15_MASK},getPatternPosition:function(t){return a.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case 0:return(e+r)%2==0;case 1:return e%2==0;case 2:return r%3==0;case 3:return(e+r)%3==0;case 4:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case 5:return e*r%2+e*r%3==0;case 6:return(e*r%2+e*r%3)%2==0;case 7:return(e*r%3+Math.floor(e*r/2)%2)%2==0;default:throw new Error("bad maskPattern:")+t}},getErrorCorrectPolynomial:function(t){for(var e=new n(1,1),r=0;r<t;r++)e=e.multiply(new n(1,[1,285]));return e},getLengthInBits:function(t,e){if(e>=1&&e<i){if(1==t)return 8;if(2==t)return 8;if(4==t)return 8;if(8==t)return 8}throw new Error("typeNumber:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var o=0;o<e;o++){for(var i=0,f=t.isDark(n,o),a=-1;a<=1;a++)if(!(n+a<0||e<=n+a))for(var u=-1;u<=1;u++)o+u<0||e<=o+u||0==a&&0==u||f==t.isDark(n+a,o+u)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<e-1;n++)for(var o=0;o<e-1;o++){var c=0;t.isDark(n,o)&&c++,t.isDark(n+1,o)&&c++,t.isDark(n,o+1)&&c++,t.isDark(n+1,o+1)&&c++,(0==c||4==c)&&(r+=3)}for(var n=0;n<e;n++)for(var o=0;o<e-6;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(var o=0;o<e;o++)for(var n=0;n<e-6;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);for(var n=0;n<e;n++){for(var o=0,i=0;o<e;o++)t.isDark(n,o)&&i++;var f=Math.abs(100*i/e-50)/5;r+=10*f}for(var o=0;o<e;o++){for(var n=0,i=0;n<e;n++)t.isDark(n,o)&&i++;var f=Math.abs(100*i/e-50)/5;r+=10*f}return r}}; e.prototype={addData:function(e){this.dataList.push(new t(e)),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=21;this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupTimingPattern(),this.setupTypeInfo(t,e),null==this.dataCache&&(this.dataCache=e=this.createData(),this.dataCache=e),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=r>=0&&r<=6&&(0==n||6==n)||n>=0&&n<=6&&(0==r||6==r)||r>=2&&r<=4&&n>=2&&n<=4)},setupTimingPattern:function(){for(var t=0;t<this.moduleCount;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0),null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupTypeInfo:function(t,e){for(var r=a.getBCHTypeInfo(o.L<<3|e),n=0;n<15;n++){var i=!t&&(1&r>>n&1);n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;n<15;n++){var i=!t&&(1&r>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,f=0,c=this.moduleCount-1;c>0;c-=2)for(6==c&&c--;;){for(var l=0;l<2;l++)if(null==this.modules[n][c-l]){var h=!1;f<t.length&&(h=1==(t[f]>>>i&1)),a.getMask(e,n,c-l)&&(h=!h),this.modules[n][c-l]=h,i--,-1==i&&(f++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}},createData:function(){for(var e=this.createBytes(),n=0;n<e.length;n++)e[n]&=255;return e},createBytes:function(){var n=new u;for(n.put(4,4),n.put(8,this.dataList[0].getLength()),this.dataList[0].write(n);n.getLengthInBits()+4<=8;)n.put(0,4);for(;n.getLengthInBits()%8!=0;)n.put(0,1);for(var i=n.getBuffer(),f=i.length,a=a.getErrorCorrectPolynomial(7),h=new r(i,a.getLength()-1),d=h.mod(a),v=d.getNum(),g=new Array(a.getLength()-1),m=0;m<g.length;m++){var w=m+v-g.length;g[m]=w>=0?d.get(w):0}for(var b=[],y=0;y<f;y++)b.push(i[y]);for(m=0;m<g.length;m++)b.push(g[m]);return b},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=a.getLostPoint(this);(0==r||n<t)&&(t=n,e=r)}return e}};var u=function(){this.buffer=[],this.length=0};u.prototype={getBuffer:function(){return this.buffer},getLengthInBits:function(){return this.length},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};n.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new n(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<t.getLength();o++)e.num[r+o]^=this.get(r)*t.get(o);return e},mod:function(t){var e=this.getLength(),o=t.getLength();if(e<o)return this;for(var i=new n(e,this.num),f=new n(o-1),a=0;a<=e-o;a++){for(var u=i.get(a);u;)u>>=1,a++;for(var c=a-(o-1)-1;c>=0;c--)for(var l=0;l<o;l++)f.num[c+l]^=t.get(l);i=i.xor(f)}return i},xor:function(t){for(var e=new n(this.getLength()),r=0;r<this.getLength();r++)e.num[r]=this.get(r)^t.get(r);return e},fromNumber:function(t){for(var e=0;e<this.num.length;e++)this.num[e]=0;for(var e=this.num.length-1;t>0&&e>=0;)this.num[e]=255&t,t>>=8,e--},fromString:function(t){for(var e=0;e<this.num.length;e++)this.num[e]=0;for(var e=this.num.length-1,r=t.length-1;r>=0&&e>=0;)this.num[e]=t.charCodeAt(r),r--}};window.QRCode=e}();

function makeQR(text, mount){
  const qr = new QRCode(1, 'L');
  qr.addData(text);
  qr.make();
  const size = 220;
  const c = document.createElement('canvas');
  c.width = c.height = size; const ctx = c.getContext('2d');
  const count = qr.getModuleCount();
  const tile = Math.floor(size / count);
  ctx.fillStyle = '#fff'; ctx.fillRect(0,0,size,size); ctx.fillStyle = '#000';
  for(let r=0;r<count;r++) for(let col=0;col<count;col++) if(qr.isDark(r,col)) ctx.fillRect(col*tile, r*tile, tile, tile);
  mount.appendChild(c);
}

// --- Events
pad.addEventListener('input', saveLocal);
$('#newBtn').addEventListener('click', ()=>{ location.hash=''; pad.value=''; saveLocal(); });
$('#clearBtn').addEventListener('click', ()=>{ pad.value=''; saveLocal(); });
$('#copyBtn').addEventListener('click', async()=>{
  try{ await navigator.clipboard.writeText(pad.value); }
  catch{ copyText(pad); }
});
$('#pasteBtn').addEventListener('click', async()=>{
  try{ const t = await navigator.clipboard.readText(); pad.value += (pad.value?"\n":"") + t; saveLocal(); }
  catch{ alert('Your browser blocked paste. Use ‚åò/Ctrl+V.'); }
});
$('#saveBtn').addEventListener('click', ()=>{ makeLink(); });
$('#qrBtn').addEventListener('click', ()=>{ if(!currentLink) makeLink(); else linkDlg.showModal(); });
$('#closeLink').addEventListener('click', ()=> linkDlg.close());
$('#copyLink').addEventListener('click', ()=>{ linkOut.select(); document.execCommand('copy'); });
$('#openLink').addEventListener('click', ()=>{ if(linkOut.value) window.open(linkOut.value, '_blank'); });
$('#downloadBtn').addEventListener('click', downloadTxt);
$('#upload').addEventListener('change', (e)=>{ const f=e.target.files?.[0]; if(f) readFile(f); e.target.value=''; });

// Drag & drop
pad.addEventListener('dragover', e=>{ e.preventDefault(); });
pad.addEventListener('drop', e=>{ e.preventDefault(); const f=e.dataTransfer?.files?.[0]; if(f) readFile(f); });

// Init
fromHash();
loadLocal();
  </script>
</body>
</html>
